<!DOCTYPE html>
<html>
    <head>
	<meta charset='UTF-8'>
	<meta name='viewport' content='width=device-width, initial-scale=1'>
	<meta name='description' content='Blog de tecnologia do Elo7, mantido pelo nosso time de Engenharia, compartilhando conhecimento e mostrando como é o dia a dia de um colaborador fora de série.'>
	<meta name='google-site-verification' content='NqCILBTY8B8P-r_KF8BSZKH9kUQgQOEbXJvEMaB33vw'>
	<meta name='google-site-verification' content='cKh-stJM3_ENNfMjaBIIyYiDgMXZFpRkoH8eQTcPwhM' />
	<meta name="google-site-verification" content="6Er6NBhORIKrEwdS46h772O_7LTE9vWgZjwtzuZ5gpQ" />
	<meta name='theme-color' content='#FDC24F'>
	<meta name='keywords' content='Elo7,tecnologia,post,desenvolvimento,blog,devops,terraform,iac,infrastructure as code,infra,'>
	<meta name='language' content='pt-br'>
	<meta name='title' content='Elo7 Tech - Terraformando tudo - parte 3'>
	<meta name='apple-mobile-web-app-title' content='Elo7 Tech - Terraformando tudo - parte 3'>
	<meta name='mobile-web-app-capable' content='yes'>

	<meta property='fb:app_id' content='644444999041914'>
	<meta property='fb:admins' content='100003324447975'>

	<meta property='og:site_name' content='Elo7 Tech'>
	<meta property='og:image' content='https://blog.elo7.dev/images/cover/terraformando-tudo-3.jpg'>
	<meta property='og:type' content='website'>
	<meta property='og:title' content='Elo7 Tech - Terraformando tudo - parte 3'>
	<meta property='og:url' content='https://blog.elo7.dev/terraformando-tudo-3/'>
	<meta property='og:description' content='Blog de tecnologia do Elo7, mantido pelo nosso time de Engenharia, compartilhando conhecimento e mostrando como é o dia a dia de um colaborador fora de série.'>

	<meta name='twitter:widgets:csp' content='on'>
	<meta name='twitter:card' content='summary_large_image'>

	<meta property='twitter:title' content='Elo7 Tech - Terraformando tudo - parte 3'>
	<meta property='twitter:domain' content='https://blog.elo7.dev/'>
	<meta property='twitter:url' content='https://blog.elo7.dev/terraformando-tudo-3/'>
	<meta property='twitter:description' content='Blog de tecnologia do Elo7, mantido pelo nosso time de Engenharia, compartilhando conhecimento e mostrando como é o dia a dia de um colaborador fora de série.'>
	<meta property='twitter:image' content='https://blog.elo7.dev/images/cover/terraformando-tudo-3.jpg'>

	<link rel='canonical' href='https://blog.elo7.dev/terraformando-tudo-3/'>
	<title>Elo7 Tech - Terraformando tudo - parte 3</title>
	<link rel='stylesheet' href='https://blog.elo7.dev/css/reset.css'>
	<link rel='stylesheet' href='https://blog.elo7.dev/css/vendor/highlight.css' >
	<link rel='stylesheet' href='https://blog.elo7.dev/css/main.css' >
	<link rel='stylesheet' href='https://blog.elo7.dev/css/posts.css' >
	<link rel='stylesheet' href='https://blog.elo7.dev/css/post.css' >
	<link rel='stylesheet' href='https://blog.elo7.dev/css/publisher.css' >
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-16.png' sizes='16x16'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-32.png' sizes='32x32'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-48.png' sizes='48x48'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-64.png' sizes='64x64'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-96.png' sizes='96x96'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-128.png' sizes='128x128'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-160.png' sizes='160x160'>
	<link rel='icon' href='https://blog.elo7.dev/images/favicon/favicon-192.png' sizes='192x192'>
	<link rel='apple-touch-icon-precomposed' sizes='180x180' href='https://blog.elo7.dev/images/favicon/favicon-180.png'>
	<link rel='apple-touch-icon-precomposed' sizes='152x152' href='https://blog.elo7.dev/images/favicon/favicon-152.png'>
	<link rel='apple-touch-icon-precomposed' sizes='144x144' href='https://blog.elo7.dev/images/favicon/favicon-144.png'>
	<link rel='apple-touch-icon-precomposed' sizes='120x120' href='https://blog.elo7.dev/images/favicon/favicon-120.png'>
	<link rel='apple-touch-icon-precomposed' sizes='114x114' href='https://blog.elo7.dev/images/favicon/favicon-114.png'>
	<link rel='apple-touch-icon-precomposed' sizes='76x76' href='https://blog.elo7.dev/images/favicon/favicon-76.png'>
	<link rel='apple-touch-icon-precomposed' sizes='72x72' href='https://blog.elo7.dev/images/favicon/favicon-72.png'>
	<link rel='apple-touch-icon-precomposed' sizes='60x60' href='https://blog.elo7.dev/images/favicon/favicon-60.png'>
	<link rel='apple-touch-icon-precomposed' sizes='57x57' href='https://blog.elo7.dev/images/favicon/favicon-57.png'>
	<link rel='apple-touch-icon-precomposed' href='https://blog.elo7.dev/images/favicon/favicon-precomposed.png'>
	<script>window.addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script>
	<script src='/js/vendor/async-define.js'></script>
</head>

    <body data-env='production' data-ga-code='UA-3692628-29'>
        <meta name='page_type' content='post'>
        <meta name='category' content='devops'>
        <header class='left-pane'>
    <div class='logo-container'>
        <a rel='home' itemprop='url' href='https://blog.elo7.dev/' class='logo'>Tech Blog Elo7</a>
    </div>
    <div class='navigation'>
        <input id='categories-switch' type='checkbox' class='categories-switch'>
        <label for='categories-switch' class='selectable'>
            <h2 class='nav-title'>Categorias</h2>
        </label>
        <nav aria-label='Navegue pelas categorias do nosso blog' class='nav-list nav-category'>
            
                <a href='/categoria/back-end' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Back End</a></span>
                </a>
            
                <a href='/categoria/big-data' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Big Data</a></span>
                </a>
            
                <a href='/categoria/cultura' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Cultura</a></span>
                </a>
            
                <a href='/categoria/design' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Design</a></span>
                </a>
            
                <a href='/categoria/devops' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Devops</a></span>
                </a>
            
                <a href='/categoria/eventos' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Eventos</a></span>
                </a>
            
                <a href='/categoria/front-end' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Front End</a></span>
                </a>
            
                <a href='/categoria/machine-learning' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Machine Learning</a></span>
                </a>
            
                <a href='/categoria/mobile' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Mobile</a></span>
                </a>
            
                <a href='/categoria/vagas' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Vagas</a></span>
                </a>
            
            <a href='/talks' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                <span itemprop='name'>Palestras</span>
            </a>
        </nav>
    </div>
    <div class='navigation'>
        <input id='more-switch' type='checkbox' class='more-switch'>
        <label for='more-switch' class='selectable'>
            <h2 class='nav-title'>Veja também</h2>
        </label>
        <nav class='nav-list nav-more' aria-label='Navegue pelos links relacionados ao Elo7'>
            <a itemprop='relatedLink' href='/meetups'>
                <span itemprop='name'>Meetups no Elo7</span>
            </a>
            <a itemprop='relatedLink' href='http://carreira.elo7.com.br/engenharia/' target='_blank'>
                <span itemprop='name'>A engenharia</span>
            </a>
            <a itemprop='relatedLink' href='http://carreira.elo7.com.br/' target='_blank'>
                <span itemprop='name'>Carreiras</span>
            </a>
            <a itemprop='relatedLink' href='http://elo7.com.br/' target='_blank'>
                <span itemprop='name'>Elo7</span>
            </a>
        </nav>
    </div>
    <div class='social'>
        <a title='Github do Elo7' rel='external' itemprop='relatedLink' href='https://github.com/elo7' target='_blank' class='github'>Github do Elo7</a>
        <a title='Twitter do Elo7' rel='external' itemprop='relatedLink' href='https://twitter.com/elo7tech' target='_blank' class='twitter'>Twitter do Elo7</a>
        <a title='RSS do Elo7' rel='external' itemprop='relatedLink' href='https://blog.elo7.dev/index.xml' target='_blank' class='rss'>RSS do Elo7</a>
        <a title='Newsletter do Elo7' rel='external' itemprop='relatedLink' href='http://eepurl.com/cVUwvH' target='_blank' class='email'>Newsletter do Elo7</a>
    </div>
</header>

        <main aria-label='Conteúdo principal' itemscope itemtype='http://schema.org/Blog'>
            <article itemprop='blogPost' itemscope itemtype='http://schema.org/BlogPosting' class='post-main'>
                <figure class='cover-image' itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
                    <img src='/images/cover/terraformando-tudo-3.jpg' alt='Terraformando tudo - parte 3' itemprop="url">
                </figure>
                <div class='post-content'>
                    <h1 itemprop='name' class='title'>Terraformando tudo - parte 3</h1>
                    <div class='post-meta'>
                        <p class='date'>
                            Publicado em:
                            <time class='date'
    datetime='2017-09-18 00:00:00 &#43;0000 UTC'
    aria-label='18 de setembro de 2017'>
    18/09/2017
    <meta itemprop='datePublished' content='Mon Sep 18 2017 00:00:00 GMT&#43;0000 (UTC)'/>
    <meta itemprop='dateModified' content='Mon Sep 18 2017 00:00:00 GMT&#43;0000 (UTC)'>
    <meta name='date' content='2017-09-18'>
</time>

                        </p>

                        <article>
                            
                                <a data-author='lucasvasconcelos' itemprop='author' itemscope itemtype='http://schema.org/Person' rel='author' href='/autor/lucasvasconcelos/' class='author'>
                                    <meta name='author' itemprop='url' content='/autor/lucasvasconcelos'>
                                    <img class='hide avatar' width='50px' height='50px' itemprop='image'>
                                    <p itemprop='name' class='publisher' data-author='lucasvasconcelos'>@lucasvasconcelos</p>
                                </a>
                            

                            <meta itemprop='worksFor' content='Elo7 Serviços de Informática SA'>
                        </article>
                    </div>
                    <div itemprop='articleBody'>
                        

<p>Veja os outros <em>posts</em> da série:
- <a href="/terraformando-tudo-1/">Terraformando tudo - parte 1</a>
- <a href="/terraformando-tudo-2/">Terraformando tudo - parte 2</a></p>

<p>Olár!</p>

<p>Como foi prometido no <a href="/terraformando-tudo-2/">segundo post</a>, estamos aqui novamente. Agora, para responder uma das perguntas que sempre são feitas na hora de adotar uma nova ferramenta: &ldquo;E o legado?&rdquo;</p>

<p>No contexto de Infraestrutura como Código, o legado é a infra já existente. No caso do Elo7, são todos os recursos criados &ldquo;na base do mouse&rdquo; pelo console da AWS.</p>

<p>Também é válido lembrar que esse cenário não ocorre apenas com ambientes legados. Ele pode ocorrer em uma situação de emergência, onde o plantonista ou time responsável é obrigado a fazer alguma alteração na infra via console/interface web para corrigir algum problema. Nesse caso também teremos inconsistências entre o estado encontrado no código e no <em>provider</em>.</p>

<h2 id="o-caminho-inverso">O caminho inverso</h2>

<p>Se até agora o Terraform gerou estados baseados no código, agora vamos fazer o caminho inverso: vamos gerar estados de uma infra já existente no <em>provider</em> e escrever código que se encaixa nesse estado.</p>

<p>O Terraform vai nos ajudar na primeira parte do caminho, gerando os estados da infra existente através do <a href="https://www.terraform.io/docs/import/index.html">comando <code>import</code></a>.</p>

<p>Antes das demonstrações, devemos nos atentar às limitações dessa funcionalidade:
- Os <code>resources</code> suportados pelo <code>import</code> do Terraform não são os mesmos que temos à disposição para criar do zero no Terraform. Ou seja, nem todos recursos que podem ser criados através do código podem ser importados. A boa notícia é que a cada nova <em>release</em> do Terraform (que possui ciclo de vida de aproximadamente 20 dias) novos recursos para importação são adicionados. Em um caso onde o recurso (Redshift, Lambda, etc) não for suportado pelo <code>import</code>, pode-se criar um estado manualmente ou utilizar ferramentas de terceiros. <a href="https://www.terraform.io/docs/import/importability.html">Uma lista dos <code>resources</code> suportados atualmente pode ser vista aqui</a>. E, caso quiser, é relativamente fácil fazer com que um <code>resource</code> seja &ldquo;importável&rdquo;, como pode ser visto nesse <a href="https://github.com/hashicorp/terraform/pull/15237/files">PR</a>;
- O <code>import</code> não gera código! Ele gera o estado daquele recurso apenas, cabendo a nós a escrita do código referente ao estado gerado.</p>

<p>Com esses pontos em mente, vamos ver como podemos utilizar o <code>import</code>.</p>

<h2 id="usando-o-import">Usando o <code>import</code></h2>

<p>Para o <code>import</code>, devemos ter em mãos três informações (mais informações sobre o <em>pattern</em> do Terraform <a href="/terraformando-tudo-2/">no segundo post</a>):
- Tipo do recurso
- Nome do recurso
- ID do recurso na AWS</p>

<p>Vamos ver como funciona o <code>import</code> de uma instância EC2?</p>

<h3 id="importando-um-resource">Importando um <code>resource</code></h3>

<p>O exemplo a seguir mostra o <code>import</code> de uma instância existente na AWS. Primeiro, vamos nomear nossas variáveis:
- <strong>Tipo do recurso:</strong> <code>aws_instance</code>
- <strong>Nome do recurso:</strong> <code>elo7-ec2-example</code>
- <strong>ID do recurso na AWS:</strong> <code>i-a1b2c3</code> (Como a instância já existe na AWS, temos o ID dela)</p>

<p>Agora, vamos rodar o <code>import</code> (sim! É apenas um comando!):</p>

<pre><code class="language-python">$ terraform import aws_instance.elo7-ec2-example i-a1b2c3
</code></pre>

<p>Onde</p>

<pre><code class="language-python">$ terraform  import  aws_instance.elo7-ec2-example  i-a1b2c3
|__________| |_____| |___________| |______________| |______|
      |       |           |           |                |
Comando do    |        Tipo de        |         ID do resource
 Terraform    |        Resource       |            na AWS
              |                       |
          Funcionalidade         Nome do resource
            de import             no Terraform
</code></pre>

<p>Ao executar o comando, temos uma saída dizendo que tudo correu bem:</p>

<pre><code>$ terraform import aws_instance.elo7-ec2-example i-a1b2c3
aws_instance.elo7-ec2-example: Importing from ID &quot;i-a1b2c3&quot;...
aws_instance.elo7-ec2-example: Import complete!
  Imported aws_instance (ID: i-a1b2c3)
aws_instance.elo7-ec2-example: Refreshing state... (ID: i-a1b2c3)

Import success! The resources imported are shown above. These are
now in your Terraform state. Import does not currently generate
configuration, so you must do this next. If you do not create configuration
for the above resources, then the next `terraform plan` will mark
them for destruction
</code></pre>

<p>E por último, mas não menos importante, o estado que o Terraform gera:</p>

<pre><code class="language-python">&quot;aws_instance.elo7-ec2-example&quot;: {
    &quot;type&quot;: &quot;aws_instance&quot;,
    &quot;depends_on&quot;: [],
    &quot;primary&quot;: {
        &quot;id&quot;: &quot;i-a1b2c3&quot;,
        &quot;attributes&quot;: {
            &quot;ami&quot;: &quot;ami-z9e334&quot;,
            &quot;availability_zone&quot;: &quot;us-west-1a&quot;,
            &quot;disable_api_termination&quot;: &quot;false&quot;,
            &quot;ebs_block_device.#&quot;: &quot;0&quot;,
            &quot;ebs_optimized&quot;: &quot;false&quot;,
            &quot;ephemeral_block_device.#&quot;: &quot;0&quot;,
            &quot;iam_instance_profile&quot;: &quot;example-web-app&quot;,
            &quot;id&quot;: &quot;i-a1b2c3&quot;,
            &quot;instance_state&quot;: &quot;running&quot;,
            &quot;instance_type&quot;: &quot;t2.large&quot;,
            &quot;key_name&quot;: &quot;key-web-app&quot;,
            &quot;monitoring&quot;: &quot;false&quot;,
            &quot;network_interface_id&quot;: &quot;eni-5643f442&quot;,
            &quot;private_dns&quot;: &quot;ip-10-0-3-54.us-west-1.compute.internal&quot;,
            &quot;private_ip&quot;: &quot;10.0.3.54&quot;,
            &quot;public_dns&quot;: &quot;&quot;,
            &quot;public_ip&quot;: &quot;&quot;,
            &quot;root_block_device.#&quot;: &quot;1&quot;,
            &quot;root_block_device.0.delete_on_termination&quot;: &quot;true&quot;,
            &quot;root_block_device.0.iops&quot;: &quot;100&quot;,
            &quot;root_block_device.0.volume_size&quot;: &quot;8&quot;,
            &quot;root_block_device.0.volume_type&quot;: &quot;gp2&quot;,
            &quot;security_groups.#&quot;: &quot;0&quot;,
            &quot;source_dest_check&quot;: &quot;true&quot;,
            &quot;subnet_id&quot;: &quot;subnet-674f3556&quot;,
            &quot;tags.%&quot;: &quot;3&quot;,
            &quot;tags.Name&quot;: &quot;web-app&quot;,
            &quot;tags.env&quot;: &quot;dev&quot;,
            &quot;tenancy&quot;: &quot;default&quot;,
            &quot;user_data&quot;: &quot;d2a580ddfbcb7e5ba2e00833805981ac61d500df&quot;,
            &quot;vpc_security_group_ids.#&quot;: &quot;1&quot;,
            &quot;vpc_security_group_ids.4021914259&quot;: &quot;sg-8f38de4&quot;
        },
        &quot;meta&quot;: {
            &quot;schema_version&quot;: &quot;1&quot;
        },
        &quot;tainted&quot;: false
    },
    &quot;deposed&quot;: [],
    &quot;provider&quot;: &quot;aws&quot;
}
</code></pre>

<p>Pronto! Já rodamos o <code>import</code> e possuímos nossa infra criada manualmente no idioma do Terraform! :)</p>

<p>Mas lembram que isso é só a primeira parte do caminho? Esse comando não gera o código, e isso pode trazer consequências gravíssimas, pois <strong>podemos destruir a infra que acabamos de importar</strong>.</p>

<p>Sim, isso é possível. Porque, no momento em que um <code>apply</code> for executado, o Terraform irá tentar destruir a infra que não existe em seu código e existe em seu estado que, <a href="/terraformando-tudo-1/">como já vimos</a>, é o comportamento esperado. Para provar esse ponto, vejamos a saída de um <code>terraform plan</code>:</p>

<pre><code class="language-python">$ terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but
will not be persisted to local or remote state storage.

aws_instance.elo7-ec2-example: Refreshing state... (ID: i-a1b2c3)

The Terraform execution plan has been generated and is shown below.
Resources are shown in alphabetical order for quick scanning. Green resources
will be created (or destroyed and then created if an existing resource
exists), yellow resources are being changed in-place, and red resources
will be destroyed. Cyan entries are data sources to be read.

Note: You didn't specify an &quot;-out&quot; parameter to save this plan, so when
&quot;apply&quot; is called, Terraform can't guarantee this is what will execute.

- aws_instance.elo7-ec2-example


Plan: 0 to add, 0 to change, 1 to destroy.
</code></pre>

<p><strong>NUNCA execute o <code>apply</code> nesse momento :|</strong></p>

<h2 id="segunda-parte-do-caminho-escrevendo-o-código">Segunda parte do caminho: escrevendo o código</h2>

<p>Temos duas opções:
- Escrever o código manualmente;
- Gerar o código utilizando a ferramenta <a href="https://github.com/dtan4/terraforming">terraforming</a> (essa ferramenta é específica para recursos na AWS).</p>

<p>A escolha mais correta é utilizar uma ferramenta que vai fazer o trabalho para nós mas, por questões didáticas, vamos mostrar o processo de escrita manual do código.</p>

<p>Para fazer isso, devemos pegar as informações relevantes do estado e gerar um <em>configuration</em>. Nesse caso, estamos importando uma instância EC2 e vamos precisar retirar do estado as seguintes informações:
- <strong>Nome do resource:</strong> <code>elo7-ec2-example</code>
- <strong>ID da AMI:</strong> <code>ami-z9e334</code>
- <strong>Tipo da instância:</strong> <code>t2.large</code>
- <strong>Nome da chave:</strong> <code>key-web-app</code>
- <strong>ID da subnet:</strong> <code>subnet-674f3556</code>
- <strong>Security groups:</strong> <code>sg-8f38de4</code>
- <strong>IAM Instance Profile:</strong> <code>example-web-app</code>
- <strong>EC2 Tags:</strong> <code>Name: web-app, env: test</code></p>

<p>Cada <code>resource</code> depende de um conjunto mínimo de informações para que possa ser definido. Mais informações podem ser vistas na <a href="https://www.terraform.io/docs/">documentação oficial</a>.</p>

<p>Com os dados obtidos, podemos gerar o código:</p>

<pre><code class="language-python">resource aws_instance &quot;elo7-ec2-example&quot; {
    ami = &quot;ami-z9e334&quot;
    instance_type = &quot;t2.large&quot;
    key_name = &quot;key-web-app&quot;
    subnet_id = &quot;subnet-674f3556&quot;
    vpc_security_group_ids = [ &quot;sg-8f38de4&quot; ]
    iam_instance_profile = &quot;example-web-app&quot;

    tags {
        Name = &quot;web-app&quot;
        env = &quot;test&quot;
    }
}
</code></pre>

<p>Podemos testar nosso código executando o comando <code>plan</code>. O sucesso da importação se dá quando esse comando indica que nenhuma mudança será feita, nos dizendo que não há inconsistências entre código e estado:</p>

<pre><code class="language-python">$ terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but
will not be persisted to local or remote state storage.

aws_instance.elo7-ec2-example: Refreshing state... (ID: i-a1b2c3)

No changes. Infrastructure is up-to-date. This means that Terraform
could not detect any differences between your configuration and
the real physical resources that exist. As a result, Terraform
doesn't need to do anything.
</code></pre>

<p>No dia-a-dia, com certeza iremos preferir utilizar a ferramenta <code>terraforming</code> citada acima. Nós já usamos ela bastante por aqui e não tivemos problemas. Mais informações sobre como utilizá-la podem ser vistas <a href="https://github.com/dtan4/terraforming">na página da ferramenta</a>.</p>

<h2 id="conclusões">Conclusões</h2>

<p>Esperamos ter respondido com clareza a resposta da pergunta &ldquo;E o legado?&rdquo; quando se trata de Infraestrutura como Código e Terraform.</p>

<p>É recomendado que, ao utilizar o comando <code>import</code>, o usuário já possua alguma vivência com o Terraform e conheça bem os conceitos dos <code>resources</code> que serão importados, pois existem pontos do procedimento nos quais os estados são inconsistentes e um comando errado pode causar catástrofes. Cuidado com <code>resources</code> como registros de DNS e <em>load balancers</em>.</p>

<p>Um outro detalhe foi que, aqui no Elo7, não saímos importando tudo que já existia de uma vez, decidimos fazer por demanda. Assim, quando uma mudança na infra de uma aplicação era necessária, aproveitávamos e fazíamos o <code>import</code>.</p>

<p>Logo voltamos com mais posts sobre Terraform! Obrigado! :D</p>


                        <ul class='tag-list'>
                            
                                <li>
                                    <a href='/tags/devops/'>devops</a>
                                </li>
                            
                                <li>
                                    <a href='/tags/terraform/'>terraform</a>
                                </li>
                            
                                <li>
                                    <a href='/tags/iac/'>iac</a>
                                </li>
                            
                                <li>
                                    <a href='/tags/infrastructure-as-code/'>infrastructure as code</a>
                                </li>
                            
                                <li>
                                    <a href='/tags/infra/'>infra</a>
                                </li>
                            
                        </ul>
                        <section class='share'>
                            <a href='#share' class='share-post hide' title='Clique aqui para compartilhar esse post'>Compartilhe</a>
                            <div class='social-share'>
                                <a href='https://www.facebook.com/dialog/share?app_id=644444999041914&href=https%3a%2f%2fblog.elo7.dev%2fterraformando-tudo-3%2f&display=popup' rel='noopener' target='_blank' class='link-share facebook' title='Clique para compartilhar no Facebook'>
                                    Compartilhar no facebook
                                </a>
                                <a href='https://twitter.com/intent/tweet?text=terraformando-tudo-parte-3&url=https%3a%2f%2fblog.elo7.dev%2fterraformando-tudo-3%2f&hashtags=elo7tech' rel='noopener' target='_blank' class='link-share twitter' title='Clique para compartilhar no Twitter'>
                                    Compartilhar no twitter
                                </a>
                                <a href='https://blog.elo7.dev/terraformando-tudo-3/?utm_source=share&utm_medium=copy' class='link-share hide copy' title='Clique para copiar a url'>
                                    Copiar URL
                                </a>
                                <span class='copy-success'>Link copiado</span>
                                <input type='url' value='https://blog.elo7.dev/terraformando-tudo-3/?utm_source=share&utm_medium=copy' class='link-input'>
                            </div>
                        </section>
                    </div>
                    <meta itemprop='headline' content='Terceiro post da série &#39;Terraformando Tudo&#39;, que conta a nossa trajetória em busca da codificação da nossa infraestrutura. Neste post mostraremos como &#34;terraformar&#34; uma infra já existente.'/>
                    <span itemprop='publisher' itemscope itemtype='http://schema.org/Organization'>
                        <meta itemprop='name' content='Elo7 Tech'/>
                        <meta itemprop='url' content='https://blog.elo7.dev/'/>
                        <span itemprop='logo' itemscope itemtype='http://schema.org/ImageObject'>
                            <link href='https://images.elo7.com.br/assets/v3/desktop/png/logo-elo7.png' itemprop='url'/>
                            <meta itemprop='width' content='100px'/>
                            <meta itemprop='height' content='100px'/>
                        </span>
                    </span>
                    <meta itemprop='mainEntityOfPage' content='Elo7 Serviços de Informática SA'/>

                    <div id='disqus_thread'></div>
                </div>
            </article>
        </main>

        <footer itemscope itemtype='http://schema.org/Organization'>
    <a rel='home' itemprop='url' href='https://blog.elo7.dev/' >
        blog.elo7.dev © <script>now = new Date; document.write(now.getFullYear());</script>
    </a>
    <meta itemprop='name' content='Elo7 Serviços de Informática SA'/>
    <section class='footer-social'>
        <a title='Github do Elo7' rel='external' itemprop='url' href='https://github.com/elo7' target='_blank' class='github'>Github do Elo7</a>
        <a title='Twitter do Elo7' rel='external' itemprop='url' href='https://twitter.com/elo7tech' target='_blank' class='twitter'>Twitter do Elo7</a>
        <a title='RSS do Elo7' rel='external' itemprop='url' href='https://blog.elo7.dev/index.xml' target='_blank' class='rss'>RSS do Elo7</a>
        <a title='Newsletter do Elo7' rel='external' itemprop='url' href='http://eepurl.com/cVUwvH' target='_blank' class='email'>Newsletter do Elo7</a>
    </section>
</footer>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src='/js/analytics.js'></script>
<script async src='/js/github.js'></script>
<script async src='/js/vendor/events-amd.js'></script>
<script async src='/js/vendor/ajax.js'></script>
<script async src='/js/vendor/doc.js'></script>
<script type='text/x-mathjax-config'>
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ],
            displayMath: [ ['$$','$$'], ['\[','\]'] ],
            processEscapes: true
        },
    });
</script>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
<script src='/js/vendor/highlight.js'></script>
<script>hljs.initHighlightingOnLoad();</script>


        <script>
            var disqus_shortname = 'engenhariaelo7';
            var disqus_identifier = '2017-09-18 00:00:00 \x2b0000 UTC:\/terraformando-tudo-3\/';
            var disqus_url = 'https:\/\/blog.elo7.dev\/terraformando-tudo-3\/';

            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Habilite o JavaScript para ver os comentários</noscript>
        <script async src='/js/post.js'></script>
    </body>
</html>

<!DOCTYPE html>
<html>
    <head>
	<meta charset='UTF-8'>
	<meta name='viewport' content='width=device-width, initial-scale=1'>
	<meta name='description' content='Blog de tecnologia do Elo7, mantido pelo nosso time de Engenharia, compartilhando conhecimento e mostrando como é o dia a dia de um colaborador fora de série.'>
	<meta name='google-site-verification' content='NqCILBTY8B8P-r_KF8BSZKH9kUQgQOEbXJvEMaB33vw'>
	<meta name='google-site-verification' content='cKh-stJM3_ENNfMjaBIIyYiDgMXZFpRkoH8eQTcPwhM' />
	<meta name='theme-color' content='#FDC24F'>
	<meta name='keywords' content='Elo7,tecnologia,post,desenvolvimento,blog,browsers,'>
	<meta name='language' content='pt-br'>
	<meta name='title' content='Elo7 Tech - O universo soturno da compatibilidade cross-browser'>
	<meta name='apple-mobile-web-app-title' content='Elo7 Tech - O universo soturno da compatibilidade cross-browser'>
	<meta name='mobile-web-app-capable' content='yes'>

	<meta property='fb:app_id' content='644444999041914'>
	<meta property='fb:admins' content='100003324447975'>

	<meta property='og:site_name' content='Elo7 Tech'>
	<meta property='og:image' content='https://elo7.dev/images/cover/elo7.png'>
	<meta property='og:type' content='website'>
	<meta property='og:title' content='Elo7 Tech - O universo soturno da compatibilidade cross-browser'>
	<meta property='og:url' content='https://elo7.dev/compatibilidade-cross-browser/'>
	<meta property='og:description' content='Blog de tecnologia do Elo7, mantido pelo nosso time de Engenharia, compartilhando conhecimento e mostrando como é o dia a dia de um colaborador fora de série.'>

	<meta name='twitter:widgets:csp' content='on'>
	<meta name='twitter:card' content='summary_large_image'>

	<meta property='twitter:title' content='Elo7 Tech - O universo soturno da compatibilidade cross-browser'>
	<meta property='twitter:domain' content='https://elo7.dev/'>
	<meta property='twitter:url' content='https://elo7.dev/compatibilidade-cross-browser/'>
	<meta property='twitter:description' content='Blog de tecnologia do Elo7, mantido pelo nosso time de Engenharia, compartilhando conhecimento e mostrando como é o dia a dia de um colaborador fora de série.'>
	<meta property='twitter:image' content='https://elo7.dev/images/ico/elo7.png'>

	<link rel='canonical' href='https://elo7.dev/compatibilidade-cross-browser/'>
	<title>Elo7 Tech - O universo soturno da compatibilidade cross-browser</title>
	<link rel='stylesheet' href='https://elo7.dev/css/reset.css'>
	<link rel='stylesheet' href='https://elo7.dev/css/vendor/highlight.css' >
	<link rel='stylesheet' href='https://elo7.dev/css/main.css' >
	<link rel='stylesheet' href='https://elo7.dev/css/posts.css' >
	<link rel='stylesheet' href='https://elo7.dev/css/post.css' >
	<link rel='stylesheet' href='https://elo7.dev/css/publisher.css' >
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-16.png' sizes='16x16'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-32.png' sizes='32x32'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-48.png' sizes='48x48'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-64.png' sizes='64x64'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-96.png' sizes='96x96'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-128.png' sizes='128x128'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-160.png' sizes='160x160'>
	<link rel='icon' href='https://elo7.dev/images/favicon/favicon-192.png' sizes='192x192'>
	<link rel='apple-touch-icon-precomposed' sizes='180x180' href='https://elo7.dev/images/favicon/favicon-180.png'>
	<link rel='apple-touch-icon-precomposed' sizes='152x152' href='https://elo7.dev/images/favicon/favicon-152.png'>
	<link rel='apple-touch-icon-precomposed' sizes='144x144' href='https://elo7.dev/images/favicon/favicon-144.png'>
	<link rel='apple-touch-icon-precomposed' sizes='120x120' href='https://elo7.dev/images/favicon/favicon-120.png'>
	<link rel='apple-touch-icon-precomposed' sizes='114x114' href='https://elo7.dev/images/favicon/favicon-114.png'>
	<link rel='apple-touch-icon-precomposed' sizes='76x76' href='https://elo7.dev/images/favicon/favicon-76.png'>
	<link rel='apple-touch-icon-precomposed' sizes='72x72' href='https://elo7.dev/images/favicon/favicon-72.png'>
	<link rel='apple-touch-icon-precomposed' sizes='60x60' href='https://elo7.dev/images/favicon/favicon-60.png'>
	<link rel='apple-touch-icon-precomposed' sizes='57x57' href='https://elo7.dev/images/favicon/favicon-57.png'>
	<link rel='apple-touch-icon-precomposed' href='https://elo7.dev/images/favicon/favicon-precomposed.png'>
	<script>window.addEventListener('error', window.__e=function f(e){f.q=f.q||[];f.q.push(e)});</script>
	<script src='/js/vendor/async-define.js'></script>
</head>

    <body>
        <header class='left-pane'>
    <div class='logo-container'>
        <a rel='home' itemprop='url' href='https://elo7.dev/' class='logo'>Tech Blog Elo7</a>
    </div>
    <div class='navigation'>
        <input id='categories-switch' type='checkbox' class='categories-switch'>
        <label for='categories-switch' class='selectable'>
            <h2 class='nav-title'>Categorias</h2>
        </label>
        <nav aria-label='Navegue pelas categorias do nosso blog' class='nav-list nav-category'>
            
                <a href='/categoria/back-end' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Back End</a></span>
                </a>
            
                <a href='/categoria/cultura' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Cultura</a></span>
                </a>
            
                <a href='/categoria/data-science' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Data Science</a></span>
                </a>
            
                <a href='/categoria/design' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Design</a></span>
                </a>
            
                <a href='/categoria/devops' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Devops</a></span>
                </a>
            
                <a href='/categoria/eventos' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Eventos</a></span>
                </a>
            
                <a href='/categoria/front-end' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Front End</a></span>
                </a>
            
                <a href='/categoria/mobile' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Mobile</a></span>
                </a>
            
                <a href='/categoria/vagas' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                    <span itemprop='name'>Vagas</a></span>
                </a>
            
            <a href='/talks' itemscope itemtype='http://schema.org/SiteNavigationElement'>
                <span itemprop='name'>Palestras</span>
            </a>
        </nav>
    </div>
    <div class='navigation'>
        <input id='more-switch' type='checkbox' class='more-switch'>
        <label for='more-switch' class='selectable'>
            <h2 class='nav-title'>Veja também</h2>
        </label>
        <nav class='nav-list nav-more' aria-label='Navegue pelos links relacionados ao Elo7'>
            <a itemprop='relatedLink' href='http://carreira.elo7.com.br/engenharia/' target='_blank'>
                <span itemprop='name'>A engenharia</span>
            </a>
            <a itemprop='relatedLink' href='http://carreira.elo7.com.br/' target='_blank'>
                <span itemprop='name'>Carreiras</span>
            </a>
            <a itemprop='relatedLink' href='http://eventos.elo7.com.br/' target='_blank'>
                <span itemprop='name'>Nossos eventos</span>
            </a>
            <a itemprop='relatedLink' href='http://elo7.com.br/' target='_blank'>
                <span itemprop='name'>Elo7</span>
            </a>
        </nav>
    </div>
    <div class='social'>
        <a title='Github do Elo7' rel='external' itemprop='relatedLink' href='https://github.com/elo7' target='_blank' class='github'>Github do Elo7</a>
        <a title='Twitter do Elo7' rel='external' itemprop='relatedLink' href='https://twitter.com/elo7tech' target='_blank' class='twitter'>Twitter do Elo7</a>
        <a title='RSS do Elo7' rel='external' itemprop='relatedLink' href='https://elo7.dev/index.xml' target='_blank' class='rss'>RSS do Elo7</a>
        <a title='Newsletter do Elo7' rel='external' itemprop='relatedLink' href='http://eepurl.com/cVUwvH' target='_blank' class='email'>Newsletter do Elo7</a>
    </div>
</header>

        <main aria-label='Conteúdo principal' itemscope itemtype='http://schema.org/Blog'>
            <article itemprop='blogPost' itemscope itemtype='http://schema.org/BlogPosting' class='post-main'>
                <figure class='cover-image' itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
                    <img src='/images/cover/elo7.png' alt='O universo soturno da compatibilidade cross-browser' itemprop="url">
                </figure>
                <div class='post-content'>
                    <h1 itemprop='name' class='title'>O universo soturno da compatibilidade cross-browser</h1>
                    <div class='post-meta'>
                        <p class='date'>
                            Publicado em:
                            <time class='date'
    datetime='2015-09-28 00:00:00 &#43;0000 UTC'
    aria-label='28 de setembro de 2015'>
    28/09/2015
    <meta itemprop='datePublished' content='Mon Sep 28 2015 00:00:00 GMT&#43;0000 (UTC)'/>
    <meta itemprop='dateModified' content='Mon Sep 28 2015 00:00:00 GMT&#43;0000 (UTC)'>
</time>
                        </p>

                        <article>
                            
                                <a data-author='mottam' itemprop='author' itemscope itemtype='http://schema.org/Person' rel='author' href='/autor/mottam/' class='author'>
                                    <meta itemprop='url' content='/autor/mottam'>
                                    <img class='hide avatar' width='50px' height='50px' itemprop='image'>
                                    <p itemprop='name' class='publisher' data-author='mottam'>@mottam</p>
                                </a>
                            

                            <meta itemprop='worksFor' content='Elo7 Serviços de Informática SA'>
                        </article>
                    </div>
                    <div itemprop='articleBody'>
                        

<p><img src="../images/compatibilidade-cross-browser-1.png" alt="Alt &quot;Browsers&quot;" /></p>

<p>Em um mundo ideal, todos os browsers apresentariam o mesmo comportamento no carregamento e renderização das páginas da web. Para o terror de muitos desenvolvedores, existem determinadas situações em que uma implementação funciona perfeitamente no navegador utilizado na hora de testar o código, contudo ao abrir a mesma página com o mesmo código em outro, o site está quebrado.</p>

<p>Ao afirmar que um site é cross-browser, o desenvolvedor está se comprometendo a dar suporte às funcionalidades em todos os navegadores. O usuário deve conseguir alcançar seus objetivos, esteja ele usando um Internet Explorer 8 ou uma versão nightly do Firefox. Isto não necessariamente significa que a aparência de todos os browsers deve ser igual. Entretanto, é almejado que o desenvolvedor lide com as limitações de cada navegador da melhor forma possível.</p>

<h2 id="checkbox-hack">Checkbox-hack</h2>

<p>Um truque bem conhecido para exibir e esconder elementos sem javascript é o checkbox hack. A tag label contém a propriedade &ldquo;for&rdquo;, a qual faz referência a outro elemento. O comportamento esperado disso é: ao se clicar na label, o mesmo evento de click é disparado na referência. Complementando isso, os seletores de css permitem escolher elementos irmãos. Como resultado, é possível permitir ao usuário clicar em uma label, a qual selecionará um checkbox que, ao clicado, exibe um outro elemento.</p>

<pre><code class="language-html">&lt;form&gt;
    &lt;label for='toggle'&gt;Label text&lt;/label&gt;
    &lt;input id='toggle' type='checkbox' /&gt;
    &lt;div&gt;olá&lt;/div&gt;
&lt;form&gt;
</code></pre>

<pre><code class="language-css">#toggle {
    display: none; /* Não queremos uma checkbox aparecendo à toa */
}

#toggle:checked ~ div { /* Este é o nosso truque. Quando a checkbox estiver clicada, a div aparece */
    display: block;
}

div {
    display: none; /* Inicialmente a div está invisível */
}
</code></pre>

<p>Tudo parece perfeito, certo? O Chrome ou o Firefox rodariam isso sem nenhum problema. O problema aparece na hora de testar no IE. O primeiro pensamento que vem à cabeça do desenvolvedor é &ldquo;Ué, será que o seletor &lsquo;~&rsquo; não funciona no IE8?&ldquo;. Uma rápida procurada na internet e ele já descobre que o seletor em questão funciona desde o IE7! Então por que não funciona?</p>

<p>Bom, o comportamento de clique em um elemento invisível no IE8 não é o mesmo dos navegadores mais recentes. O problema não está no css, mas no fato da label estar apontando para um checkbox invisível (o que particularmente acredito que faça sentido. Se não está visível, não tem como este elemento ter sido clicado). Portanto, para que este truque funcione no IE, basta que o elemento esteja aparecendo (por mais que não esteja aparente ao usuário final).</p>

<pre><code class="language-css">#toggle {
    position: absolute;
    top: -9999px;
    left: -9999px;
}
</code></pre>

<p>Resolvido o problema do IE, aparenta-se que tudo irá funcionar perfeitamente em outros navegadores principais. Entretanto, com a chegada dos smartphones e a popularização dos planos de dados, grande porção dos acessos agora são realizados pelo universo mobile, o que inicialmente não parece um problema. Pela suprema maioria dos smartphones rodarem Android (82.8%) ou iOS (13.9%), é esperado que os navegadores tenham comportamentos iguais à suas respectivas versões desktop.</p>

<p>Infelizmente, este cenário é bom demais para ser verdade. Ainda é preciso lidar com o Android Browser.</p>

<p>Em relação ao checkbox hack, pseudo-seletores (:checked, no caso) juntamente a seletores de elementos adjacentes (+ ou ~) não funcionam. Este seria o momento de desistir de tentar implementar essa funcionalidade sem javascript, o que seria péssimo. O poder computacional destes dispositivos é limitado e a experiência de utilização desses navegadores já é péssima. Ademais, resolver este problema com javascript implicaria na velocidade de carregamento da página, algo não desejável quando se trata de conexões por rede móvel.</p>

<p>É aí que entram as resoluções sem sentido. Existe um hack para que este comportamento seja alcançado: colocar uma animação infinita no corpo do html.</p>

<p>…?</p>

<p>Estes são os momentos que intrigam o desenvolvedor, pois este exerce lógica em suas decisões de implementação. Eis que de súbito, existem formas de se resolver o problema tão lógicas quanto a de se colocar dentes caídos debaixo de um travesseiro a fim de resolver problemas financeiros.</p>

<pre><code class="language-css">body { -webkit-animation: bugfix infinite 1s; }
@-webkit-keyframes bugfix { from {padding:0;} to {padding:0;} }
</code></pre>

<p>E com isso já é possível remover um item da lista de &lsquo;não funciona e não sei por quê&rsquo; e movê-lo para a &lsquo;funciona, mas não me pergunte como&rsquo;. Para finalizar, ainda existe o bug no iOS &lt; 6, o qual não permite que checkboxes sejam ativas com toques em labels. Mas tudo é solucionado com uma propriedade onclick vazia colocada diretamente no elemento.</p>

<pre><code class="language-html">&lt;input id='toggle' type='checkbox' onclick /&gt;
</code></pre>

<p>O resultado disso é que algo relativamente trivial acaba se tornando um monstro que só funciona com rituais pagãos.</p>

<h2 id="text-align-last">text-align-last</h2>

<p>Outro problema comum é o de alinhar em uma só linha o conteúdo de um elemento de forma que este tenha o mesmo comportamento de um texto justificado. Este tipo de layout é bem comum quando se quer deixar dois ou mais botões em uma linha, com espaços iguais entre si e ocupando todo o elemento pai. Uma propriedade de css que existe há uma grande porção de tempo resolvia isso sem grandes problemas: a text-align-last. Contando que quando se tem uma linha, a primeira também é a última. No IE 5.5 bastava colocar esta propriedade como text-align-last: justify; e pronto. O efeito obtido já era o desejado.</p>

<p>Nos navegadores atuais, o único que suporta tal propriedade é o Firefox. Pasmem, nem o Chrome dá suporte a isso. Não obstante, o suporte ao simples text-align é vasto. Este funciona normalmente, exceto na última linha. Uma forma inteligente de resolver esse problema é dada pelo uso do pseudo-seletor :after, criando uma linha vazia após a desejada. Isso torna possível justificar o conteúdo da linha que outrora não era capaz.</p>

<pre><code class="language-html">&lt;div class='parent'&gt;
    &lt;div class='son'&gt;&lt;/div&gt;
    &lt;div class='son'&gt;&lt;/div&gt;
    &lt;div class='son'&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre>

<pre><code class="language-scss">/* scss */
.parent {
    height: 100px;
    text-align: justify;

    .son {
        display: inline-block;
        background: black;
        height: 100px;
        width: 20px;
    }

    &amp;:after {
        content: ''; /* conteúdo vazio */
        display: inline-block; /* com o inline-block este conteúdo tenta permanecer na mesma linha dos elementos irmãos */
        width: 100%; /* porém, como a linha ocupa 100% do pai, isto força o início de outra linha */
    }
}
</code></pre>

<p>Os problemas apresentados neste artigo são um ínfimo pedaço que o grande problema de cross-browsing representa. Além desses, existem problemas de manutenibilidade de código relacionados a arquivos separados de fallback, por exemplo. Em alguns casos, é possível que determinada fonte de código só seja carregada em determinados ambientes, como é o caso do IE. Neste caso, é comum criar um arquivo chamado ie.css e criar fallbacks específicos. O problema emerge quando o arquivo fica tão grande que passa a conflitar com outras regras.</p>

<p>Em suma, não há um cenário belo no suporte a múltiplas plataformas. Os simples exemplos aqui apresentados demonstram que para alcançar determinados objetivos deixa-se de lado a intuitividade do código. Isto é decorrente da plataforma web estar presa a navegadores, o que deixa o desenvolvedor à mercê de suas implementações. Com isso, a fim de satisfazer os casos distintos de cada navegador, o desenvolvedor escreve códigos semelhantes a canivetes suíços.</p>

<p>Espero que tenham apreciado este post. Caso tenham gostado, deixem abaixo suas experiências surreais relativas a este assunto!</p>


                        <ul class='tag-list'>
                            
                                <li>
                                    <a href='/tags/browsers/'>browsers</a>
                                </li>
                            
                        </ul>
                        <section class='share'>
                            <a href='#share' class='share-post hide' title='Clique aqui para compartilhar esse post'>Compartilhe</a>
                            <div class='social-share'>
                                <a href='https://www.facebook.com/dialog/share?app_id=644444999041914&href=https%3a%2f%2felo7.dev%2fcompatibilidade-cross-browser%2f&display=popup' rel='noopener' target='_blank' class='link-share facebook' title='Clique para compartilhar no Facebook'>
                                    Compartilhar no facebook
                                </a>
                                <a href='https://twitter.com/intent/tweet?text=o-universo-soturno-da-compatibilidade-cross-browser&url=https%3a%2f%2felo7.dev%2fcompatibilidade-cross-browser%2f&hashtags=elo7tech' rel='noopener' target='_blank' class='link-share twitter' title='Clique para compartilhar no Twitter'>
                                    Compartilhar no twitter
                                </a>
                                <a href='https://elo7.dev/compatibilidade-cross-browser/?utm_source=share&utm_medium=copy' class='link-share hide copy' title='Clique para copiar a url'>
                                    Copiar URL
                                </a>
                                <span class='copy-success'>Link copiado</span>
                                <input type='url' value='https://elo7.dev/compatibilidade-cross-browser/?utm_source=share&utm_medium=copy' class='link-input'>
                            </div>
                        </section>
                    </div>
                    <meta itemprop='headline' content='Em um mundo ideal, todos os browsers apresentariam o mesmo comportamento no carregamento e renderização das páginas da web. Para o terror de muitos desenvolvedores, existem determinadas situações em que uma implementação funciona perfeitamente no navegador utilizado na hora de testar o código, contudo ao abrir a mesma página com o mesmo código em outro, o site está quebrado...'/>
                    <span itemprop='publisher' itemscope itemtype='http://schema.org/Organization'>
                        <meta itemprop='name' content='Elo7 Tech'/>
                        <meta itemprop='url' content='https://elo7.dev/'/>
                        <span itemprop='logo' itemscope itemtype='http://schema.org/ImageObject'>
                            <link href='https://images.elo7.com.br/assets/v3/desktop/png/logo-elo7.png' itemprop='url'/>
                            <meta itemprop='width' content='100px'/>
                            <meta itemprop='height' content='100px'/>
                        </span>
                    </span>
                    <meta itemprop='mainEntityOfPage' content='Elo7 Serviços de Informática SA'/>

                    <div id='disqus_thread'></div>
                </div>
            </article>
        </main>

        <footer itemscope itemtype='http://schema.org/Organization'>
    <a rel='home' itemprop='url' href='https://elo7.dev/' >
        elo7.dev © <script>now = new Date; document.write(now.getFullYear());</script>
    </a>
    <meta itemprop='name' content='Elo7 Serviços de Informática SA'/>
    <section class='footer-social'>
        <a title='Github do Elo7' rel='external' itemprop='url' href='https://github.com/elo7' target='_blank' class='github'>Github do Elo7</a>
        <a title='Twitter do Elo7' rel='external' itemprop='url' href='https://twitter.com/elo7tech' target='_blank' class='twitter'>Twitter do Elo7</a>
        <a title='RSS do Elo7' rel='external' itemprop='url' href='https://elo7.dev/index.xml' target='_blank' class='rss'>RSS do Elo7</a>
        <a title='Newsletter do Elo7' rel='external' itemprop='url' href='http://eepurl.com/cVUwvH' target='_blank' class='email'>Newsletter do Elo7</a>
    </section>
</footer>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src='/js/analytics.js'></script>
<script async src='/js/github.js'></script>
<script async src='/js/vendor/events-amd.js'></script>
<script async src='/js/vendor/ajax.js'></script>
<script async src='/js/vendor/doc.js'></script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src='/js/vendor/highlight.js'></script>
<script>hljs.initHighlightingOnLoad();</script>


        <script>
            var disqus_shortname = 'engenhariaelo7';
            var disqus_identifier = '2015-09-28 00:00:00 \x2b0000 UTC:\/compatibilidade-cross-browser\/';
            var disqus_url = 'https:\/\/elo7.dev\/compatibilidade-cross-browser\/';

            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Habilite o JavaScript para ver os comentários</noscript>
        <script async src='/js/post.js'></script>
    </body>
</html>
